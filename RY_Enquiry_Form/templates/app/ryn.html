<!DOCTYPE html>
<html>

<head>

    <title>Terata Enquiry Dashboard</title>
    <!-- <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" rel="stylesheet" /> -->
    <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js">
    </script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js">
    </script> -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> -->
    <!-- <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link href="//code.jquery.com/ui/1.11.4/themes/ui-lightness/jquery-ui.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.6/dist/umd/popper.min.js"
        integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.2.1/dist/js/bootstrap.min.js"
        integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
        crossorigin="anonymous"></script>

    <script>
        $(document).ready(function () {
           alert(sessionStorage.getItem("vUser"));
           if (sessionStorage.getItem("vUser") == null) {
                alert("redirct to login page");

           }
        });       
    </script>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 15px
        }

        h1 {
            color: green;
        }

        /* Style the header */
        header {
            background-color: #ffffff;
            padding: 10px;
            text-align: center;
            font-size: 5px;
            color: #000000;
            height: 3%;

        }

        /* Create two columns/boxes that floats next to each other */
        nav {
            float: left;
            width: 70%;
            height: 1300px;
            /* only for demonstration, should be removed */
            background: #ccc;
            padding: 20px;
        }

        /* Style the list inside the menu */
        nav ul {
            list-style-type: none;
            padding: 0;
        }

        article {
            float: left;
            padding: 20px;
            width: 30%;
            background-color: #f1f1f1;
            height: 1300px;
            /* only for demonstration, should be removed */
        }

        /* Clear floats after the columns */
        section::after {
            content: "";
            display: table;
            clear: both;
        }

        /* Responsive layout - makes the two columns/boxes stack on top of each other instead of next to each other, on small screens */
        @media (max-width: 600px) {

            nav,
            article {
                width: 100%;
                height: auto;
            }
        }

        .tab {
            overflow: hidden;
            border: 1px solid #ccc;
            background-color: #f1f1f1;
        }

        /* Style the buttons inside the tab */
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
            font-size: 17px;
        }

        /* Change background color of buttons on hover */
        .tab button:hover {
            background-color: #ddd;
        }

        /* Create an active/current tablink class */
        .tab button.active {
            background-color: #ccc;
        }

        /* Style the tab content */
        .tabcontent {
            display: none;
            padding: 6px 12px;
            border: 1px solid #ccc;
            border-top: none;
        }

        /* Full-width input fields */
        input[type=text],
        input[type=password] {
            width: 100%;
            padding: 12px 30px;
            margin: 8px 0;
            display: inline-block;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }

        /* Extra styles for the cancel button */
        .cancelbtn {
            width: auto;
            padding: 10px 18px;
            background-color: #83231c;
        }

        .container {
            padding: 16px;
        }

        span.psw {
            float: right;
            padding-top: 16px;
        }

        /* The Modal (background) */
        .modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            /* Stay in place */
            z-index: 1;
            /* Sit on top */
            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            overflow: auto;
            /* Enable scroll if needed */
            background-color: rgb(0, 0, 0);
            /* Fallback color */
            background-color: rgba(0, 0, 0, 0.4);
            /* Black w/ opacity */
            padding-top: 60px;
        }

        /* Modal Content/Box */
        .modal-content {
            background-color: #e3edd2;
            margin: 5% auto 15% auto;
            /* 5% from the top, 15% from the bottom and centered */
            border: 1px solid #888;
            width: 80%;
            /* Could be more or less, depending on screen size */
        }

        /* The Close Button (x) */
        .close {
            position: absolute;
            right: 25px;
            top: 0;
            color: #000;
            font-size: 35px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: rgb(186, 50, 50);
            cursor: pointer;
        }

        /* Add Zoom Animation */
        .animate {
            -webkit-animation: animatezoom 0.6s;
            animation: animatezoom 0.6s
        }

        @-webkit-keyframes animatezoom {
            from {
                -webkit-transform: scale(0)
            }

            to {
                -webkit-transform: scale(1)
            }
        }

        @keyframes animatezoom {
            from {
                transform: scale(0)
            }

            to {
                transform: scale(1)
            }
        }

        /* Change styles for span and cancel button on extra small screens */
        @media screen and (max-width: 300px) {
            span.psw {
                display: block;
                float: none;
            }

            .cancelbtn {
                width: 50%;
            }
        }
    </style>
</head>
<script>
    var csrftoken = $("[name=csrfmiddlewaretoken]").val();

    //example ajax
    $.ajax({
        url: url,
        type: 'POST',
        headers: {
            "X-CSRFToken": csrftoken
        },
        data: data,
        cache: true,
    });
</script>

<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <form class="modal-content animate" action="/login" method="post">
                <!-- <div class="imgcontainer">
                    <span onclick="document.getElementById('myModal').style.display='none'" class="close"
                        title="Close Modal">&times;</span>
                    <img src="images/Terata.jpeg" alt="Login" class="avatar">
                </div> -->
                <div class="modal-content">
                    <div class="container">
                        <label for="uname"><b>Username</b></label>
                        <input type="text" placeholder="Enter Username" id="UserName" name="uname" value="" required>

                        <label for="psw"><b>Password</b></label>
                        <input type="password" placeholder="Enter Password" id="password" name="psw" value="" required>
                        <button type="submit">Login</button>
                    </div>
                    <div class="container" style="background-color:#566d4a">
                        <!-- <button type="button" onclick="document.getElementById('myModal').style.display='none'"
                            class="cancelbtn">Cancel</button> -->
                    </div>
                </div>
            </form>
        </div>
    </div>
    <header>

        <div class="rounded float-start">
            {% load static %}
            <img src="{% static 'images/Terata.jpeg'%}" alt="no image" max-width="50%" height="60">
        </div>
        <center>
            <h1>Enquiry Validation </h1>
        </center>
    </header>

    {% if not Error %}
    <section>
        <div class="tab">
            <button class="tablinks" onclick="openTab(event, 'Unread')">Unread<font color='red'>(<b>{{Count_Unr}}</b>)
                </font>
            </button>
            <!-- <button class="tablinks" onclick="openTab(event, 'Quotation')">Ready for Quotation<font color='red'>
                    (<b>{{Count_Rfq}}</b>)</button> -->
            <button class="tablinks" onclick="openTab(event, 'ReqYarnPrice')">Sent for Yarn Pricing <font color='red'>
                    (<b>{{Count_RYP}}</b>)</button>
            <button class="tablinks" onclick="openTab(event, 'Updated')">other_status<font color='red'>
                    (<b>{{Count_Upd}}</b>)</button>
        </div>

        <div id="Unread" class="tabcontent">
            <table class="table table-hover table-sm">
                <thead>
                    <tr>

                        <th scope="col">Reg_no</th>
                        <th scope="col">Mill</th>
                        <th scope="col">Customer</th>
                        <th scope="col">Marketing_Zone</th>
                        <th scope="col">Replied_From_the_mill</th>
                        <th scope="col">Acceptance_from_the_mill</th>
                        <th scope="col">Date</th>
                        <th scope="col">&nbsp;&nbsp;&nbsp;</th>
                    </tr>
                </thead>
                <tbody>
                    {% for UnrData in Unread_Data %}

                    <tr>
                        <!-- <th scope="row">{{UnrData.Reg_no}}</th> -->
                        <td><input type="text" class="form-control" id="Rno{{UnrData.Reg_no}}"
                            name="Rno{{UnrData.Reg_no}}" value="{{UnrData.Reg_no}}" style="width:80px;">
                        </td>
                        <td><input type="text" class="form-control" id="Mill{{UnrData.Mill}}" 
                                name="Mill{{UnrData.Mill}}" value="{{UnrData.Mill}}" style="width: 200px;">
                        </td>
                        <td><input type="text" class="form-control" id="Customer{{UnrData.Customer}}"
                                name="Customer{{UnrData.Customer}}" value="{{UnrData.Customer}}" style="width: 200px;">
                        </td>
                        <td><input type="text" class="form-control" id="Marketing_Zone{{UnrData.Marketing_Zone}}"
                                name="Marketing_Zone{{UnrData.Marketing_Zone}}" value="{{UnrData.Marketing_Zone}}"
                                style="width: 200px;">
                        </td>
                        <td><input type="text" class="form-control"
                                id="Replied_From_the_mill{{UnrData.Replied_From_the_mill}}"
                                name="Replied_From_the_mill{{UnrData.Replied_From_the_mill}}"
                                value="{{UnrData.Replied_From_the_mill}}" style="width:200px;">
                        </td>

                        <td><input type="text" class="form-control"
                                id="Acceptance_from_the_mill{{UnrData.Acceptance_from_the_mill}}"
                                name="Acceptance_from_the_mill{{UnrData.Acceptance_from_the_mill}}"
                                value="{{UnrData.Acceptance_from_the_mill}}" style="width: 200px;">
                        </td>
                        <td><input type="text" class="form-control" id="Date{{UnrData.Date}}"
                                name="Date{{UnrData.Date}}" value="{{UnrData.Date}}" style="width: 200px;">
                        </td>
                        <td>
                            <a href="?Rno={{UnrData.Reg_no}}" class="btn btn-info" role="button">View</a>
                        </td>
                    </tr>

                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div id="Updated" class="tabcontent">
            <table class="table table-hover table-sm">
                <thead>
                    <tr>
                        <th scope="col">Reg_no</th>
                        <th scope="col">Mill</th>
                        <th scope="col">Customer</th>
                        <th scope="col">Marketing_Zone</th>
                        <th scope="col">Replied_From_the_mill</th>
                        <th scope="col">Acceptance_from_the_mill</th>
                        <th scope="col">Date</th>
                        <th scope="col">Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for UprData in other_status %}
                    <tr>
                        <!-- <th scope="row">{{UprData.Reg_no}}</th> -->
                        <td><input type="text" class="form-control" id="Rno{{UprData.Reg_no}}"
                                name="Rno{{UprData.Reg_no}}" value="{{UprData.Reg_no}}" style="width:80px;">
                        </td>
                        <td><input type="text" class="form-control" id="Mill{{UprData.Mill}}"
                                name="Mill{{UprData.Mill}}" value="{{UprData.Mill}}" style="width:180px;">
                        </td>
                        <td><input type="text" class="form-control" id="Customer{{UprData.Customer}}"
                                name="Customer{{UprData.Customer}}" value="{{UprData.Customer}}" style="width:180px;">
                        </td>
                        <td><input type="text" class="form-control" id="Marketing_Zone{{UprData.Marketing_Zone}}"
                                name="Marketing_Zone{{UprData.Marketing_Zone}}" value="{{UprData.Marketing_Zone}}"
                                style="width:180px;">
                        </td>
                        <td><input type="text" class="form-control"
                                id="Replied_From_the_mill{{UprData.Replied_From_the_mill}}"
                                name="Replied_From_the_mill{{UprData.Replied_From_the_mill}}"
                                value="{{UprData.Replied_From_the_mill}}" style="width:180px;">
                        </td>
                        <td><input type="text" class="form-control"
                                id="Acceptance_from_the_mill{{UprData.Acceptance_from_the_mill}}"
                                name="Acceptance_from_the_mill{{UprData.Acceptance_from_the_mill}}"
                                value="{{UprData.Acceptance_from_the_mill}}" style="width:180px;">
                        </td>
                        <td><input type="text" class="form-control" id="Date{{UprData.Date}}"
                                name="Date{{UprData.Date}}" value="{{UprData.Date}}" style="width:180px;">
                        </td>
                        <td><input type="text" class="form-control" id="Status{{UprData.Status}}"
                                name="Date{{UprData.Status}}" value="{{UprData.Status}}" style="width:180px;">
                        </td>
                        <td>
                            <a href="?Rno={{UprData.Reg_no}}" class="btn btn-info" role="button">View</a>

                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div id="Quotation" class="tabcontent">
            <table class="table table-hover table-sm">
                <thead>
                    <tr>
                        <th scope="col">Reg_no</th>
                        <th scope="col">Mill</th>
                        <th scope="col">Customer</th>
                        <th scope="col">Marketing_Zone</th>
                        <th scope="col">Replied_From_the_mill</th>
                        <th scope="col">Acceptance_from_the_mill</th>
                        <th scope="col">Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for RFQData in Ready_For_Quotation %}
                    <tr>
                        <td><input type="text" class="form-control" id="Rno{{RFQData.Reg_no}}"
                                name="Rno{{RFQData.Reg_no}}" value="{{RFQData.Reg_no}}" style="width:80px;">
                        </td>
                        <td><input type="text" class="form-control" id="Mill{{RFQData.Mill}}"
                                name="Mill{{RFQData.Mill}}" value="{{RFQData.Mill}}" style="width:200px;">
                        </td>
                        <td><input type="text" class="form-control" id="Customer{{RFQData.Customer}}"
                                name="Customer{{RFQData.Customer}}" value="{{RFQData.Customer}}" style="width:200px;">
                        </td>
                        <td><input type="text" class="form-control" id="Marketing_Zone{{RFQData.Marketing_Zone}}"
                                name="Marketing_Zone{{RFQData.Marketing_Zone}}" value="{{RFQData.Marketing_Zone}}"
                                style="width:200px;">
                        </td>
                        <td><input type="text" class="form-control"
                                id="Replied_From_the_mill{{RFQData.Replied_From_the_mill}}"
                                name="Replied_From_the_mill{{RFQData.Replied_From_the_mill}}"
                                value="{{RFQData.Replied_From_the_mill}}" style="width:200px;">
                        </td>
                        <td><input type="text" class="form-control"
                                id="Acceptance_from_the_mill{{RFQData.Acceptance_from_the_mill}}"
                                name="Acceptance_from_the_mill{{RFQData.Acceptance_from_the_mill}}"
                                value="{{RFQData.Acceptance_from_the_mill}}" style="width:200px;">
                        </td>
                        <td><input type="text" class="form-control" id="Date{{RFQData.Date}}"
                                name="Date{{RFQData.Date}}" value="{{RFQData.Date}}" style="width:200px;">
                        </td>
                        <td>
                            <a href="?Rno={{RFQData.Reg_no}}" class="btn btn-info" role="button">View</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

        </div>
        <div id="ReqYarnPrice" class="tabcontent">

            <table class="table table-hover table-sm">
                <thead>
                    <tr>
                        <th scope="col">Reg_no</th>
                        <th scope="col">Mill</th>
                        <th scope="col">Customer</th>
                        <th scope="col">Marketing_Zone</th>
                        <th scope="col">Replied_From_the_mill</th>
                        <th scope="col">Acceptance_from_the_mill</th>
                        <th scope="col">Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for RYPData in Req_Yarn_Price %}
                    <tr>
                        <td><input type="text" class="form-control" id="Rno{{RYPData.Reg_no}}"
                                name="Rno{{RYPData.Reg_no}}" value="{{RYPData.Reg_no}}" style="width:80px;">
                        </td>
                        <td><input type="text" class="form-control" id="Mill{{RYPData.Mill}}"
                                name="Mill{{RYPData.Mill}}" value="{{RYPData.Mill}}" style="width:200px;">
                        </td>
                        <td><input type="text" class="form-control" id="Customer{{RYPData.Customer}}"
                                name="Customer{{RYPData.Customer}}" value="{{RYPData.Customer}}" style="width:200px;">
                        </td>
                        <td><input type="text" class="form-control" id="Marketing_Zone{{RYPData.Marketing_Zone}}"
                                name="Marketing_Zone{{RYPData.Marketing_Zone}}" value="{{RYPData.Marketing_Zone}}"
                                style="width:200px;">
                        </td>
                        <td><input type="text" class="form-control"
                                id="Replied_From_the_mill{{RYPData.Replied_From_the_mill}}"
                                name="Replied_From_the_mill{{RYPData.Replied_From_the_mill}}"
                                value="{{RYPData.Replied_From_the_mill}}" style="width:200px;">
                        </td>
                        <td><input type="text" class="form-control"
                                id="Acceptance_from_the_mill{{RYPData.Acceptance_from_the_mill}}"
                                name="Acceptance_from_the_mill{{RYPData.Acceptance_from_the_mill}}"
                                value="{{RYPData.Acceptance_from_the_mill}}" style="width:200px;">
                        </td>
                        <td><input type="text" class="form-control" id="Date{{RYPData.Date}}"
                                name="Date{{RYPData.Date}}" value="{{RYPData.Date}}" style="width:200px;">
                        </td>
                        <td>
                            <a href="?Rno={{RYPData.Reg_no}}" class="btn btn-info" role="button">View</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <script>
            function openTab(evt, tabName) {
                var i, tabcontent, tablinks;
                tabcontent = document.getElementsByClassName("tabcontent");
                for (i = 0; i < tabcontent.length; i++) {
                    tabcontent[i].style.display = "none";
                }
                tablinks = document.getElementsByClassName("tablinks");
                for (i = 0; i < tablinks.length; i++) {
                    tablinks[i].className = tablinks[i].className.replace(" active", "");
                }
                document.getElementById(tabName).style.display = "block";
                evt.currentTarget.className += " active";
            }
        </script>
    </section>
    {% else %}
    <h2>No data was found </h2>
    {% endif %}
</body>

</html>