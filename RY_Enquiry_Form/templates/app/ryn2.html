<!DOCTYPE html>
<html>

<head>
    <title>Terata Enquiry Confirmation Form</title>
    <!-- <link href="//code.jquery.com/ui/1.11.4/themes/ui-lightness/jquery-ui.css" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script> -->
    <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js">
    </script> -->
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"
    rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.2.1/dist/js/bootstrap.min.js"
        integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
        crossorigin="anonymous"></script>
    <link href="//code.jquery.com/ui/1.11.4/themes/ui-lightness/jquery-ui.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script>
        /*document.getElementById("current_date").innerHTML = Date();*/
        $(document).ready(function () {
            var today = new Date();
            var dd = String(today.getDate()).padStart(2, '0');
            var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var yyyy = today.getFullYear();

            today = mm + '/' + dd + '/' + yyyy;
            /*document.write(today);*/
            document.getElementById("current_date").innerText = today;
        });
    </script>
    <script>
        function onButtonClick() {
            document.getElementById('textInput').className = "show";
            document.getElementById('button').className = "show";
        }
    </script>
    <script>
        $(document).ready(function () {
            var cancelAction = function () {
                $('#txtcancel').val("cancel");
                $('#RYform').submit();
            }
            $('#cancelAction').on('click', cancelAction)

            var commentAction = function () {
                $('#txtcancel').val("comment");
                
                $('#RYform').submit();
                /*window.location("app/ryn.html")*/
                /*$('#RYform').trigger("reset");
                $(this).closest('#RYform').find("textarea").val("");*/
            }
            $('#commentAction').on('click', commentAction)

        });
        if (window.history.replaceState) {
            window.history.replaceState(null, null, window.location.href);
        }
    </script>


    <script>
        //initialising a variable name row_count
        var row_count = 0;
        //printing default value of row_count that is 0 in h2 tag
        document.getElementById("counting").innerText = row_count;

        //creation of increment function
        function increment() {
            row_count = row_count + 1;
            // document.getElementById("counting").innerText = row_count;
        }
        //creation of decrement function
        function decrement() {
            row_count = row_count - 1;
            // document.getElementById("counting").innerText = row_count;
        }
    </script>
    <script>
        $(document).ready(function () {
            var row_count = $('#MyTable >tbody >tr').length;
            //var row_count = 0;
            // document.getElementById("counting").innerText = row_count;
            //Set total row count of Enquiry Items on load in hidden field
            $("#txtRowCount").val(row_count);

            $(".add-row").click(function () {
                row_count = row_count + 1;
                // document.getElementById("counting").innerText = row_count;
                // var Counts = $("#Counts").val();
                // var Quality = $("#Quality").val();
                // var Type = $("#Type").val();
                // var Blend = $("#Blend").val();
                // var Shade = $("#Shade").val();
                // var Depth = $("#Depth").val();
                // var UOM = $("#UOM").val();
                // var Quantity = $("#Quantity").val();
                // var markup = "<tr><td>" + row_count + "</td><td><input type='checkbox' name='record'>" + name + "</td><td><input type='text' class='form-control' >" + Counts + "</td><td><input type='text' class='form-control' >" + Quality + "</td><td><input type='text' class='form-control' >" + Type + "</td><td><input type='text' class='form-control' >" + Blend + "</td><td><input type='text' class='form-control' >" + Shade + "</td><td><input type='text' class='form-control' >" + Depth + "</td><td><input type='text' class='form-control' >" + UOM + "</td><td><input type='text' class='form-control' >" + Quantity + "</td></tr>";
                var markup = "<tr>";
                markup+= "<th scope=\"row\">"+row_count+"</th>";
                markup+= "<td scope=\"row\"><input type='checkbox' name='record'> </td>";
                markup+= "<td><input type=\"text\" class=\"form-control\" id=Counts"+row_count+" name=Counts"+row_count+" style=\"width:60px\" > </td>  ";
                markup+= "<td><input type=\"text\" class=\"form-control\" id=Quality"+row_count+" name=Quality"+row_count+" style=\"width:60px\" > </td>  ";
                markup+= "<td><input type=\"text\" class=\"form-control\" id=YarnType"+row_count+" name=YarnType"+row_count+" style=\"width:100px\" > </td>  ";
                markup+= "<td><input type=\"text\" class=\"form-control\" id=Blend"+row_count+" name=Blend"+row_count+" style=\"width:250px\" > </td>  ";
                markup+= "<td><input type=\"text\" class=\"form-control\" id=Shade"+row_count+" name=Shade"+row_count+" style=\"width:150px\" > </td>  ";
                markup+= "<td><input type=\"text\" class=\"form-control\" id=Depth"+row_count+" name=Depth"+row_count+" style=\"width:100px\" > </td>  ";
                markup+= "<td><input type=\"text\" class=\"form-control\" id=UOM"+row_count+" name=UOM"+row_count+" style=\"width:60px\" > </td>  ";
                markup+= "<td><input type=\"text\" class=\"form-control\" id=Quantity"+row_count+" name=Quantity"+row_count+" style=\"width:80px\" > </td>  ";  
                markup+= "</tr>";
                $("table tbody").append(markup);
                $("#txtRowCount").val(row_count);
            });

            // Find and remove selected table rows
            $(".delete-row").click(function () {
                $("table tbody").find('input[name="record"]').each(function () {
                    if ($(this).is(":checked")) {
                        $(this).parents("tr").remove();
                        row_count = row_count - 1;
                        // document.getElementById("counting").innerText = row_count;
                    }
                });
                $("#txtRowCount").val(row_count);
            });
        });
        $('#myModal').on('shown.bs.modal', function () {
            $('#myInput').trigger('focus')
        })   
    </script>
    <script type="text/javascript">
        $(document).ready(function () {

            $('#wrapper').dialog({
                autoOpen: false,
                title: 'Email Details'
            });
            $('#opener').click(function () {
                $('#wrapper').dialog('open');
                // return false;
            });
        });
    </script>

    <style>
        .accordion {
            text-align: center;
        }

        .accordion.width {
            display: flex;
            width: 100px;
        }

        .accordion.width .card {
            flex-direction: row;
            min-width: min-content;
        }

        .accordion.width .card .card-header {
            cursor: pointer;
            transform: rotate(180deg);
            writing-mode: vertical-rl;
            background-color: #0F9D58;
            border: 2px solid black;
        }

        .card-body {
            width: 600px;
            background-color: white;
        }

        .card-Email {
            width: 475px;
            background-color: white;
        }

        .collapsing.width {
            transition: width 0.5s ease;
            height: auto;
            width: 5px;
        }

        h1 {
            color: green;
        }

        p {
            color: black;
        }

        .button {
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            margin-left: 850px;
            cursor: pointer;
        }

        .button2 {
            background-color: #008CBA;
        }

        .popup {
            position: relative;
            display: inline-block;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* The actual popup */
        .popup .popuptext {
            visibility: hidden;
            width: 160px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px 0;
            position: absolute;
            z-index: 1;
            bottom: 95%;
            left: 50%;
            margin-left: 50px;
        }

        /* Popup arrow */
        .popup .popuptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #555 transparent transparent transparent;
        }

        /* Toggle this class - hide and show the popup */
        .popup .show {
            visibility: visible;
            -webkit-animation: fadeIn 1s;
            animation: fadeIn 1s;
        }

        /* Add animation (fade in the popup) */
        @-webkit-keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        body {
            margin-top: 20px;
            background-color: #e9ebee;
        }

       
        .form-group.fl_icon .icon {
            position: absolute;
            top: 1px;
            left: 16px;
            width: 48px;
            height: 48px;
            background: #f6f6f7;
            color: #b5b8c2;
            text-align: center;
            line-height: 50px;
            -webkit-border-top-left-radius: 2px;
            -webkit-border-bottom-left-radius: 2px;
            -moz-border-radius-topleft: 2px;
            -moz-border-radius-bottomleft: 2px;
            border-top-left-radius: 2px;
            border-bottom-left-radius: 2px;
        }

        .form-group .form-input {
            font-size: 13px;
            line-height: 50px;
            font-weight: 400;
            color: #b4b7c1;
            width: 100%;
            height: 50px;
            padding-left: 20px;
            padding-right: 20px;
            border: 1px solid #edeff2;
            border-radius: 3px;
        }

        .form-group.fl_icon .form-input {
            padding-left: 70px;
        }

        .form-group textarea.form-input {
            height: 150px;
        }

        .hidden {
            display: none;
        }

        #Logout {
            line-height: 30px;
            width: 80px;
            font-size: 10pt;
            font-family: tahoma;
            margin-top: 1px;
            margin-right: 2px;
            position: absolute;
            top: 0;
            right: 0;
        }

        .topright {
            position: absolute;
            top: 20px;
            right: 90px;
            font-size: 18px;
        }
    
    /*  Comment Box CSS */
    @import url(//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css);

    
    .detailBox {
        width:240%;
        border:2px solid rgb(36, 35, 35);
        margin:50px;
        display: flex;
        padding-bottom: 20px;
    }
    .left{
            flex: 50%;
        }
    .right{
        flex: 25%;
    }
   
    .titleBox {
        background-color:#fdfdfd;
        padding:10px;
    }
    .titleBox label{
    color:#444;
    margin:0;
    display:inline-block;
    }

    .commentBox {
        padding:10px;
        border-top:1px dotted rgb(24, 24, 24);
    }
    .commentBox .form-group:first-child, .actionBox .form-group:first-child {
        width:80%;
    }
    .commentBox .form-group:nth-child(2), .actionBox .form-group:nth-child(2) {
        width:18%;
    }
    .actionBox .form-group * {
        width:100%;
    }
    .taskDescription {
        margin-top:10px 0;
        width:100%;
    }
    .commentList {
        padding:0;
        list-style:none;
        max-height:200px;
        overflow:auto;
    }
    .commentList li {
        margin:0;
        margin-top:10px;
    }
    .commentList li > div {
        display:table-cell;
    }
    .commenterImage {
        width:30px;
        margin-right:5px;
        height:100%;
        float:left;
    }
    .commenterImage img {
        width:100%;
        border-radius:50%;
    }
    .commentText p {
        margin:0;
    }
    .sub-text {
        color:#aaa;
        font-family:verdana;
        font-size:11px;
    }
    .actionBox {
        border-top:1px dotted rgb(17, 16, 16);
        padding:10px;
    }
    </style>

</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <div class="rounded float-start">
        {% load static %}
        <img src="{% static 'images/Terata.jpeg'%}" alt="no image" max-width="50%" height="60">
        <div>
            <div class="topright">Login as: {{Customer}}</div>
            <input class="btn btn-primary" id="Logout" type="button" value="Logout">
        </div>
        <center>
            <h1>Enquiry Validation </h1>
        </center>
    </div>
    {% if not Error %}
    <div class="col">
        <div class="card">
            <div class="card-header" data-toggle="collapse" data-target="#collapseTwo">
                Enquiry Form
            </div>
            <div id="collapseTwo" class="collapse show width" data-parent="#accordionHorizontalExample">
                <div class="card-body">
                    <form name="RYform" id="RYform" action="" method="post">

                        {% csrf_token %}
                        <div class="container">
                            <div class="row">
                                <div class="col-sm">
                                    <label for="Reg_no" class="form-label">Reg_no:</label><br>
                                    <input type="text" class="form-control" id="Rno" name="Rno" value={{vReg_no}}
                                        readonly style="width:100px">
                                </div>
                                <div class="col-sm">
                                    <label for="Date" class="form-label">Date:</label><br>
                                    <input type="text" class="form-control" id="Date" name="Date" value='{{Date}}'
                                        {{Feild_Type}} style="width:100px">
                                </div>
                                <div class="col-sm">
                                    <label for="Mill" class="form-label">Mill:</label><br>
                                    <input type="text" class="form-control" id="Mill" name="Mill" value='{{Mill}}'
                                        {{Feild_Type}} style="width:450px"><br><br>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm">
                                    <label for="Mill Rep" class="form-label">Mill_Rep:</label><br>
                                    <input type="text" class="form-control" id="Mill_Rep" name="Mill_Rep"
                                        value='{{Mill_Rep}}' {{Feild_Type}} style="width:450px">
                                </div>
                                <div class="col-sm">
                                    <label for="Customer" class="form-label">Customer:</label><br>
                                    <input type="text" class="form-control" id="Customer" name="Customer"
                                        value='{{Customer}}' {{Feild_Type}} style="width:450px">
                                </div>
                                <div class="col-sm">
                                    <label for="MarketingZone" class="form-label">Marketing_Zone:</label><br>
                                    <input type="text" class="form-control" id="Marketing_Zone" name="Marketing_Zone"
                                        value='{{Marketing_Zone}}' {{Feild_Type}} style="width:150px">
                                </div>
                            </div>
                        </div>
                        <br>
                        <br>


                        <!-- Counts in a table-->
                        <table id="MyTable" class="table table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">Row_no</th>
                                    <th scope="col"></th>
                                    <th scope="col">Counts</th>
                                    <th scope="col">Quality</th>
                                    <th scope="col">Type</th>
                                    <th scope="col">Blend</th>
                                    <th scope="col">Shade</th>
                                    <th scope="col">Depth</th>
                                    <th scope="col">UOM</th>
                                    <th scope="col">Quantity</th>
                                    {% if Feild_Type == 'readonly' %}
                                    <th scope="col">Rate</th>
                                    <th scope="col">Amount</th>
                                    <th scope="col">Last order</th>
                                    {% endif %}

                                </tr>
                            </thead>
                            <tbody>
                                <!--- NOTE to MALIKA - your for loop should come here -->
                                   
                                {% for Reg_no in data %}
                               
                              
                                <tr>
                                    <th scope="row">{{forloop.counter}} <input type="hidden"  id="DBID{{forloop.counter}}"
                                        name="DBID{{forloop.counter}}" value="{{Reg_no.id}}" style="width:60px"
                                    ></th>
                                    <th scope="row"></th>

                                    <td><input type="text" class="form-control" id="Counts{{forloop.counter}}"
                                            name="Counts{{forloop.counter}}" value="{{Reg_no.Counts}}" style="width:60px"
                                            {{Feild_Type}}>
                                    </td>
                                    <td><input type="text" class="form-control" id="Quality{{forloop.counter}}"
                                            name="Quality{{forloop.counter}}" value="{{Reg_no.Quality}}" style="width:60px"
                                            {{Feild_Type}}>
                                    </td>
                                    <td><input type="text" class="form-control" id="YarnType{{forloop.counter}}"
                                            name="YarnType{{forloop.counter}}" value="{{Reg_no.Type}}" style="width:100px"
                                            {{Feild_Type}}>
                                    </td>
                                    <td><input type="text" class="form-control" id="Blend{{forloop.counter}}"
                                            name="Blend{{forloop.counter}}" value="{{Reg_no.Blend}}" style="width:250px"
                                            {{Feild_Type}}>
                                    </td>
                                    <td><input type="text" class="form-control" id="Shade{{forloop.counter}}"
                                            name="Shade{{forloop.counter}}" value="{{Reg_no.Shade}}" style="width:150px"
                                            {{Feild_Type}}>
                                    </td>
                                    <td> <input type="text" class="form-control" id="Depth{{forloop.counter}}"
                                            name="Depth{{forloop.counter}}" value="{{Reg_no.Depth}}" style="width:100px"
                                            {{Feild_Type}}>
                                    </td>
                                    <td><input type="text" class="form-control" id="UOM{{forloop.counter}}"
                                            name="UOM{{forloop.counter}}" value="{{Reg_no.UOM}}" style="width:60px"
                                            {{Feild_Type}}>
                                    </td>
                                    <td><input type="text" class="form-control" id="Quantity{{forloop.counter}}"
                                            name="Quantity{{forloop.counter}}" value="{{Reg_no.Quantity}}" style="width:80px"
                                            {{Feild_Type}}>
                                    </td>

                                    {% if Feild_Type == 'readonly' %}
                                    <td><input type="text" class="col-xs-2" id="Rate{{forloop.counter}}"
                                            name="Rate{{forloop.counter}}" value="{{Reg_no.Rate}}" style="width:60px">
                                    </td>
                                    <td><input type="text" class="col-xs-2" id="Amount{{forloop.counter}}"
                                            name="Amount{{forloop.counter}}" value="{{Reg_no.Amount}}" style="width:60px">
                                    </td>
                                    <td><input type="text" class="col-xs-2" id="Last_order{{forloop.counter}}"
                                            name="Last_order{{forloop.counter}}" value="{{Reg_no.Last_order}}"
                                            style="width:80px">
                                    </td>
                                    {% endif %}
                                </tr>
                                {% endfor %}
                                
                                {% if not Feild_Type %}
                                <button type="button" class="add-row" value="Add Row" {{Feild_Type}}>Add Row</button>
                                
                                <input type="hidden" id="txtRowCount" name="txtRowCount" value="">
                                <button type="button" class="delete-row" {{Feild_Type}}>Delete Row</button>
                                {% endif %}
                            </tbody>
                        </table>
                    
                    <div class="alert alert-danger" role="alert">
                        Please Click on Save only if there is a change
                    </div>
                    <!-- <div class="d-grid gap-2">
                        <button type="submit"
                            class="btn btn-primary btn-lg btn-block">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Save
                            and Proceed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button>
                        <button type="button" id="cancelAction"
                            class="btn btn-primary btn-lg btn-block">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Proceed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button>
                        
                    </div> -->
                    <!--
                        Change button size using bootstrap
                    -->
                    <div class="d-grid gap-2">
                        <input class="btn btn-primary" value="&nbsp;&nbsp;&nbsp;&nbsp;save and proceed&nbsp;&nbsp;&nbsp;&nbsp;" type="submit">
                        <input class="btn btn-primary" id="cancelAction" value="&nbsp;&nbsp;&nbsp;&nbsp;proceed &nbsp;&nbsp;&nbsp;&nbsp;">
                   </div>
                   
                        <!-- new comments box-->


                        <!-- new comments box-->
                        
                            
                                <div class="detailBox">
                                    <div class="left">
                                    <div class="titleBox">
                                        <label>Comments</label>
                                    </div>
                                <div class="commentBox">
                                    <p class="taskDescription"><i>Interact with your partner</i></p>
                                </div>
                                <div class="actionBox">
                                    <ul class="commentList">
                                        {% for id in data3 %} 
                                        <li>
                                            <div class="commenterImage">
                                            ---     {{id.UserId}}  ---  
                                        </div>
                                        <div class="commentText">
                                            <p class="">{{id.Comments}}</p> <span class="date sub-text">{{id.DT}}</span>
                        
                                        </div>
                                    </li>
                                    {% endfor %}
                                    </ul>
                                    </div>
                                    </div>
                                    
                                </ul>
                                <!-- <form method="post" class="form-block"> -->
                                    <div class="right">
                               
                                    <div class="form-group">
                                       
                                        <center><textarea style="height:250px;width:400px; border: solid rgb(55, 53, 53) 2px;" 
                                            class="form-control" required="" id="Ccomment" aria-describedby="emailHelp"
                                            name="Ccomment" value="" placeholder="Your text"></textarea></center>
                                    </div>
                                    <div class="form-group">
                                       <center> <button id="commentAction" class="btn btn-default" style="width: 15%;; background-color: #85daf7;" >Add</button></center>
                                    </div>
                                    <input type="hidden" id="txtcancel" name="txtcancel" value="">
                                    {% if messages %}
                                    <div class="alert alert-success alert-dismissible">
                                        {% for message in messages %}
                                        <p>{{ message }}</p>
                                        {% endfor %}
                                    </div>
                                    {% endif %}
                                    <!-- </form> -->
                            </div>
                        </div>
                        <!-- Ends-->
                    </form>  

                   
                </div>
        
    {% else %}
    <h2>No data was found</h2>
    {% endif %}

</body>

</html>