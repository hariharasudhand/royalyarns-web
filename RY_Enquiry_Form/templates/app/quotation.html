<style>
    .topright {
        position: absolute;
        top: 20px;
        right: 30px;
        font-size: 18px;
    }

    .userCircle {
        border-radius: 50%;
        background: #289c34;
        border: 1px solid #289c34;
        color: #e6f2ea;
        text-align: center;
        display: block;
        margin: 0px;
        position: relative;
        height: 42px;
        width: 42px;
        z-index: 0;

        font: 32px  Courier New;
    }
</style>



{% extends 'layouts/base.html' %}

{% block title %} UI Tables {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}


        {% load static %}
        <div class="container-fluid py-4">

            <div class="row">
              <div class="col-12">
                <div class="card mb-4">
                  <div class="card-header pb-0">
                    
                   
        
        <div class="topleft">
            <img src="{% static 'images/RYN_logo.jpeg'%}" alt="no image" max-width="100%" height="100">
            <h6> 
                <small class="text-muted">&nbsp;&nbsp;&nbsp;&nbsp;#4 / 32, 7th Cross Street, College Road,</small><br>
                <small class="text-muted">&nbsp;&nbsp;&nbsp;&nbsp;Tirupur - 641602 - INDIA </small><br>
                <small class="text-muted">&nbsp;&nbsp;&nbsp;&nbsp;Phone: +91 421 2201222, 2247333 </small><br>
                <small class="text-muted">&nbsp;&nbsp;&nbsp;&nbsp;Email: support@rayaalyarns.com </small><br>
            </h6>
            <div class="topright"><a href="/logout" id="Logout" class="text-decoration-none"> <span class="userCircle mb-0" data-toggle="tooltip" data-placement="top" title="{{user}}">{{user|make_list|first|capfirst}}</span></a>
            </div>
           <!-- <div class="topright">Login as: {{Customer}}&nbsp;&nbsp;
           <input class="btn btn-primary" id="Logout" type="button" value="Logout"> 
            <i class="fa fa-sign-out" style="font-size: x-large; color: #fc054f;" ></i></div> -->
            <div class="topcenter">
                <blockquote class="blockquote text-right">
                    <p class="mb-0">Quotation 104 - Page Industires Pvt Ltd </p>
                    <p>
                    <footer class="blockquote-footer">{% now "DATE_FORMAT" %} <cite title="Source Title">&nbsp;&nbsp;Quotation No : 104</cite></footer></p>
                  </blockquote>
                <h2> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </h2>
                <h4>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <small class="text-muted"></small></h4>
                
            </div>
    
    {% if not Error %}
    <!-- <div class="col"> -->
        
        <!-- <div class="card-body"> -->
        
            <blockquote class="blockquote text-center">
                <p class="mb-0">Thank You for your business</p>
                <p class="mb-0">We have reviewed your enquiry and have the best price   
                    from </p>
                    <p>
                <footer class="blockquote-footer">
                    Vardhman Textiles Limited (Unit-Arihant Spinning Mills)</footer>
              </blockquote></p>
    
                    
                        <table id="MyTable" class="table table-striped">
                           <thead>
                                <tr>
                                    <th scope="col">Row_no</th>
                                    <th scope="col"></th>
                                    <th scope="col">Counts</th>
                                    <th scope="col">Quality</th>
                                    <th scope="col">Type</th>
                                    <th scope="col">Blend</th>
                                    <th scope="col">Shade</th>
                                    <th scope="col">Depth</th>
                                    <th scope="col">UOM</th>
                                    <th scope="col">Quantity</th>
                                    <th scope="col">Rate</th>
                                    <th scope="col">Amount</th>
                                    <th scope="col">Last order</th>
                                </tr>
                            </thead>
                            <tbody>
                                
                               
                                {% for Reg_no in data %}
                                
                                <tr>
                                    
                                    <th scope="row">{{forloop.counter}} <input type="hidden"  id="DBID{{forloop.counter}}"
                                        name="DBID{{forloop.counter}}" value="{{Reg_no.id}}" style="width:60px"
                                    ></th>
                                    <th scope="row"><input</th>
                                    
                                    <td><input type="text" class="form-control" id="Counts{{forloop.counter}}"
                                            name="Counts{{forloop.counter}}" value="{{Reg_no.Counts}}" style="width:60px"
                                            {{Quotation_ready}}>
                                    </td>
                                    <td><input type="text" class="form-control" id="Quality{{forloop.counter}}"
                                            name="Quality{{forloop.counter}}" value="{{Reg_no.Quality}}" style="width:60px"
                                            {{Quotation_ready}}>
                                    </td>
                                    <td><input type="text" class="form-control" id="YarnType{{forloop.counter}}"
                                            name="YarnType{{forloop.counter}}" value="{{Reg_no.Type}}" style="width:100px"
                                            {{Quotation_ready}}>
                                    </td>
                                    <td><input type="text" class="form-control" id="Blend{{forloop.counter}}"
                                            name="Blend{{forloop.counter}}" value="{{Reg_no.Blend}}" style="width:250px"
                                            {{Quotation_ready}}>
                                    </td>
                                    <td><input type="text" class="form-control" id="Shade{{forloop.counter}}"
                                            name="Shade{{forloop.counter}}" value="{{Reg_no.Shade}}" style="width:150px"
                                            {{Quotation_ready}}>
                                    </td>
                                    <td> <input type="text" class="form-control" id="Depth{{forloop.counter}}"
                                            name="Depth{{forloop.counter}}" value="{{Reg_no.Depth}}" style="width:60px"
                                            {{Quotation_ready}}>
                                    </td>
                                    <td><input type="text" class="form-control" id="UOM{{forloop.counter}}"
                                            name="UOM{{forloop.counter}}" value="{{Reg_no.UOM}}" style="width:60px"
                                            {{Quotation_ready}}>
                                    </td>
                                    <td><input type="text" class="form-control" id="Quantity{{forloop.counter}}"
                                            name="Quantity{{forloop.counter}}" value="{{Reg_no.Quantity}}" style="width:80px"
                                            {{Quotation_ready}}>
                                    </td>
                                    <td>
                                       <input type="text" class="form-control col-xs-2" id="Arate{{forloop.counter}}"
                                        name="Arate{{forloop.counter}}" value="{{Reg_no.Agent_Rate}}" style="width:60px" {{Quotation_ready}}>
                                    </td>
                                    <td>
                                     <input type="text" class="form-control col-xs-2" id="Aamount{{forloop.counter}}"
                                        name="Aamount{{forloop.counter}}" value="{{Reg_no.Agent_Amount}}" style="width:60px" {{Quotation_ready}}>
                                  </td>
                                   <td>
                                      <input type="text" class="form-control col-xs-2" id="Alast_order{{forloop.counter}}"
                                      name="Alast_order{{forloop.counter}}" value="{{Reg_no.Agent_Last_order}}"
                                      style="width:80px" {{Quotation_ready}}>
                                    </td>
                                </tr>
                                <td><input type="hidden" class="form-control" id="Rno" name="Rno" value={{vReg_no}}
                                    readonly style="width:100px; border: solid rgb(183, 146, 146) 1px;" >
                            </td>
                                {% endfor %}
                                <tr class="table-success">
                                    <td colspan="11" align="right"> Total <small class="text-muted"> INR  ( Excluding GST)</small> </td>
                                    
                                <td colspan="1">
                                    <div class="txtTotalAmount"> </div>
                                </td>
                                <td></td>  

                                </tr>
                                <input type="hidden" id="txtRowCount" name="txtRowCount" value="">
                                
                            </tbody>
                        </table>
                        <br><br>
                        <script>
                            $(document).ready(function () {
                                var row_count = $('#MyTable >tbody >tr').length;
                                //var row_count = 0;
                                // document.getElementById("counting").innerText = row_count;
                                //Set total row count of Enquiry Items on load in hidden field
                                $("#txtRowCount").val(row_count);
                        
                                //alert(" find total");
                                //calculate total
                               
                                //alert(" total rows"+row_count);
                                var totalAmount = 0;
                                for ( i = 1;i<row_count;i++){
                                    
                                    var row_rate = parseInt($('#Arate'+i).val());
                                    var row_quantity = parseInt($('#Quantity'+i).val());
                        
                                    totalAmount = totalAmount + (row_rate * row_quantity);
                                }
                                $("div.txtTotalAmount").text(totalAmount.toLocaleString('en-IN'));
                        
                                $(".add-row").click(function () {
                                    row_count = row_count + 1;
                                    var markup = "<tr>";
                                    markup+= "<th scope=\"row\">"+row_count+"</th>";
                                    markup+= "<td scope=\"row\"><input type='checkbox' name='record'> </td>";
                                    markup+= "<td><input type=\"text\" class=\"form-control\" id=Counts"+row_count+" name=Counts"+row_count+" style=\"width:60px\" > </td>  ";
                                    markup+= "<td><input type=\"text\" class=\"form-control\" id=Quality"+row_count+" name=Quality"+row_count+" style=\"width:60px\" > </td>  ";
                                    markup+= "<td><input type=\"text\" class=\"form-control\" id=YarnType"+row_count+" name=YarnType"+row_count+" style=\"width:100px\" > </td>  ";
                                    markup+= "<td><input type=\"text\" class=\"form-control\" id=Blend"+row_count+" name=Blend"+row_count+" style=\"width:250px\" > </td>  ";
                                    markup+= "<td><input type=\"text\" class=\"form-control\" id=Shade"+row_count+" name=Shade"+row_count+" style=\"width:150px\" > </td>  ";
                                    markup+= "<td><input type=\"text\" class=\"form-control\" id=Depth"+row_count+" name=Depth"+row_count+" style=\"width:100px\" > </td>  ";
                                    markup+= "<td><input type=\"text\" class=\"form-control\" id=UOM"+row_count+" name=UOM"+row_count+" style=\"width:60px\" > </td>  ";
                                    markup+= "<td><input type=\"text\" class=\"form-control\" id=Quantity"+row_count+" name=Quantity"+row_count+" style=\"width:80px\" > </td>  ";  
                                    markup+= "</tr>";
                                    $("table tbody").append(markup);
                                    $("#txtRowCount").val(row_count);
                                });
                        
                                // Find and remove selected table rows
                                $(".delete-row").click(function () {
                                    $("table tbody").find('input[name="record"]').each(function () {
                                        if ($(this).is(":checked")) {
                                            $(this).parents("tr").remove();
                                            row_count = row_count - 1;
                                            // document.getElementById("counting").innerText = row_count;
                                        }
                                    });
                                    $("#txtRowCount").val(row_count);
                                });
                            });
                            $('#myModal').on('shown.bs.modal', function () {
                                $('#myInput').trigger('focus')
                            })   
                        </script>
                        
                        
                        <form name="RYform" id="RYform" action="/confirmpo" method="POST" enctype="multipart/form-data">
                            {% csrf_token %}
                            {% for Reg_no in data %}
                            <td><input type="hidden" class="form-control" id="Rno" name="Rno" value={{vReg_no}}
                                readonly style="width:100px; border: solid rgb(183, 146, 146) 1px;" >
                        </td>
                        {% endfor %}
                        <div class="form-group">
                          <label for="email"> &nbsp;&nbsp;&nbsp;&nbsp;Enter Purcahse Order Num
                            ber :</label>
                          &nbsp;&nbsp;&nbsp;&nbsp;<input type="text" class="form-control" placeholder="Enter PO # " id="txtPONumber"  name="txtPONumber" style="width:160px">
                        </div>
                        <div class="form-group">
                          <label for="pwd"> &nbsp;&nbsp;&nbsp;&nbsp; Attach Purcahse Order PDF:</label>
                          &nbsp;&nbsp;&nbsp;&nbsp;<input type="file"  name="txtPOPDF" multiple/>
                          <!-- &nbsp;&nbsp;&nbsp;&nbsp;<label class="custom-file-label" for="inputGroupFile01">Choose</label> -->
                        </div>
                        <div class="form-group form-check">
                            <input class="btn btn-primary" id="saveAndProceed" type="submit" value="Confirm Order">
                            &nbsp;&nbsp;&nbsp;&nbsp;
                      <input class="btn btn-primary" id="cancelAction" value=" Cancel ">
                        </label>
                        </div>
                        
                        
                        <br>
                    
            </form>  
            <br><br>
        
    {% else %}
    <h2>No data was found</h2>
    {% endif %}
    
    {% endblock content %}

    